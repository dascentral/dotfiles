#!/usr/bin/env bash

GREEN='\033[1;32m'
YELLOW='\033[1;33m'
WHITE='\033[1;37m'
NC='\033[0m'

abort() {
    echo -e "${YELLOW}$@${NC}"; exit 1;
}

warn() {
    echo "$@" >&2;
}

die() {
    warn "$@"; exit 1;
}

git_is_initialized() {
    git rev-parse --git-dir > /dev/null 2>&1;
}

###############################################################################

if ! git_is_initialized; then
    abort "You are not currently within a Git repository."
fi

# prepare commit message
commitMessage="$1"
if [ "$commitMessage" = "" ]; then
    commitMessage="WIP"
fi

# add and commit all items
git add .
eval "git commit -a -m '${commitMessage}'"
