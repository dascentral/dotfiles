#!/usr/bin/env bash

source /Users/${USER}/dotfiles/shell/.functions

if ! laravel_application_root; then
    abort "You are not in the root of a Laravel application."
fi

# Determine if Laravel Sail is in use
if [ -e "docker-compose.yml" ]; then
    COMMAND="vendor/bin/sail artisan"
else
    COMMAND="php artisan"
fi

# Output Laravel routes in an abbreviated format
if [ $# != 1 ]; then
    ${COMMAND} route:list --columns=method,uri,name
else
    ${COMMAND} route:list --columns=method,uri,name --name=$1
fi
