#!/usr/bin/env bash

GREEN='\033[1;32m'
YELLOW='\033[1;33m'
WHITE='\033[1;37m'
NC='\033[0m'

# check if this repo has been inited for hubflow
hubflow_has_master_configured() {
    local master=$(git config --get hubflow.branch.master)
    [ "$master" != "" ] && git_local_branch_exists "$master"
}

hubflow_has_develop_configured() {
    local develop=$(git config --get hubflow.branch.develop)
    [ "$develop" != "" ] && git_local_branch_exists "$develop"
}

hubflow_has_prefixes_configured() {
    git config --get hubflow.prefix.feature >/dev/null 2>&1     && \
    git config --get hubflow.prefix.release >/dev/null 2>&1     && \
    git config --get hubflow.prefix.hotfix >/dev/null 2>&1      && \
    git config --get hubflow.prefix.support >/dev/null 2>&1     && \
    git config --get hubflow.prefix.versiontag >/dev/null 2>&1
}

hubflow_is_initialized() {
    hubflow_has_master_configured                    && \
    hubflow_has_develop_configured                   && \
    [ "$(git config --get hubflow.branch.master)" !=    \
        "$(git config --get hubflow.branch.develop)" ] && \
    hubflow_has_prefixes_configured
}

# Validation is complete. Processing may commence.
###############################################################################

echo hubflow_has_master_configured;

exit 0;

# prepare commit message
commitMessage="$1"
if [ "$commitMessage" = "" ]; then
    commitMessage="WIP"
fi

# add and commit all items
# git add .
# eval "git commit -a -m '${commitMessage}'"

# push accordingly
# if hubflow enabled
#git hf push
# else
#git push
#fi
